# Docker Compose configuration for low-memory VPS (1GB RAM)
# Usage: docker-compose -f docker-compose.yml -f docker-compose.lowmem.yml up -d --build
#
# This file adds memory limits and other optimizations for systems with limited resources

services:
  # MongoDB Database
  mongodb:
    # Use WiredTiger cache size limit for low-memory systems
    command: mongod --wiredTigerCacheSizeGB 0.25
    deploy:
      resources:
        limits:
          memory: 384M
        reservations:
          memory: 256M

  # Backend API
  backend:
    environment:
      # Limit Node.js memory for backend
      NODE_OPTIONS: "--max-old-space-size=256"
    deploy:
      resources:
        limits:
          memory: 384M
        reservations:
          memory: 256M

  # Frontend (Vue.js)
  frontend:
    deploy:
      resources:
        limits:
          memory: 256M
        reservations:
          memory: 128M
